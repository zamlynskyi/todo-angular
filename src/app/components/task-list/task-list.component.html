<div class="task-controls">
  <label>
    –§—ñ–ª—å—Ç—Ä –∑–∞–≤–¥–∞–Ω—å:
    <select [(ngModel)]="filter">
      <option value="all">–£—Å—ñ</option>
      <option value="completed">–í–∏–∫–æ–Ω–∞–Ω—ñ</option>
      <option value="pending">–ù–µ–≤–∏–∫–æ–Ω–∞–Ω—ñ</option>
    </select>
  </label>
  <button (click)="clearAll()">–û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å–µ</button>
</div>

<ul cdkDropList (cdkDropListDropped)="drop($event)">
  <li
    *ngFor="let task of getFilteredTasks(); let i = index"
    cdkDrag
    [class.completed]="task.completed"
    class="task-item"
  >
    <div *ngIf="editIndex !== i">
      <label>
        <input
          type="checkbox"
          [checked]="task.completed"
          (change)="toggleComplete(i)"
          title="–ü–æ–∑–Ω–∞—á–∏—Ç–∏ —è–∫ –≤–∏–∫–æ–Ω–∞–Ω–µ"
        />
        –ü–æ–∑–Ω–∞—á–∏—Ç–∏ —è–∫ –≤–∏–∫–æ–Ω–∞–Ω–µ
      </label>
      <div class="task-content">
        <span>{{ task.text }} ({{ task.category }})</span>
        <small>{{ task.deadline }}</small>
      </div>
      <button (click)="startEdit(i)">‚úèÔ∏è</button>
      <button (click)="deleteTask(i)">üóë</button>
    </div>
    <div *ngIf="editIndex === i" class="edit-form">
      <input
        [(ngModel)]="editedTask.text"
        placeholder="–ù–∞–∑–≤–∞"
        required
        title="–ù–∞–∑–≤–∞ –∑–∞–≤–¥–∞–Ω–Ω—è"
      />
      <input
        [(ngModel)]="editedTask.deadline"
        type="date"
        placeholder="–î–µ–¥–ª–∞–π–Ω"
        title="–î–µ–¥–ª–∞–π–Ω"
      />
      <input
        [(ngModel)]="editedTask.description"
        placeholder="–û–ø–∏—Å"
        title="–û–ø–∏—Å –∑–∞–≤–¥–∞–Ω–Ω—è"
      />
      <select [(ngModel)]="editedTask.priority" title="–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç">
        <option value="–≤–∏—Å–æ–∫–∏–π">–í–∏—Å–æ–∫–∏–π</option>
        <option value="—Å–µ—Ä–µ–¥–Ω—ñ–π">–°–µ—Ä–µ–¥–Ω—ñ–π</option>
        <option value="–Ω–∏–∑—å–∫–∏–π">–ù–∏–∑—å–∫–∏–π</option>
      </select>
      <select [(ngModel)]="editedTask.category" title="–ö–∞—Ç–µ–≥–æ—Ä—ñ—è">
        <option value="—Ä–æ–±–æ—Ç–∞">–†–æ–±–æ—Ç–∞</option>
        <option value="–æ—Å–æ–±–∏—Å—Ç—ñ">–û—Å–æ–±–∏—Å—Ç—ñ</option>
        <option value="–Ω–∞–≤—á–∞–Ω–Ω—è">–ù–∞–≤—á–∞–Ω–Ω—è</option>
      </select>
      <button (click)="saveEdit()">üíæ</button>
      <button (click)="cancelEdit()">‚ùå</button>
    </div>
  </li>
</ul>
